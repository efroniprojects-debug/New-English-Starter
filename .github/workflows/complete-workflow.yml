name: ABC English Explorer - Final Working Deploy

on:
  workflow_dispatch:
  push:
    branches: [ main ]

jobs:
  deploy:
    runs-on: ubuntu-latest
    
    steps:
      - name: Checkout
        uses: actions/checkout@v4
        with:
          fetch-depth: 0

      - name: Clean Repository
        run: find . -mindepth 1 -maxdepth 1 ! -name '.git' ! -name '.github' -exec rm -rf {} +

      - name: Create Structure
        run: |
          mkdir -p assets/images assets/icons assets/sounds
          mkdir -p lessons/grade1 lessons/grade2 lessons/grade3 lessons/grade4 lessons/grade5 lessons/grade6
          mkdir -p css js components games

      - name: Build Website
        run: |
          cat > index.html <<EOF
<!DOCTYPE html>
<html lang="he" dir="rtl">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>ABC English Explorer</title>
<style>
body { 
font-family: Arial, sans-serif;
background: linear-gradient(135deg, #4FC3F7, #29B6F6);
color: white; margin: 0; padding: 20px; text-align: center;
}
.container { max-width: 1000px; margin: 0 auto; }
.header { 
background: rgba(255,255,255,0.1);
padding: 40px; border-radius: 20px; margin-bottom: 30px;
}
.robot { font-size: 80px; margin-bottom: 20px; }
h1 { font-size: 50px; margin: 20px 0; }
.subtitle { font-size: 20px; opacity: 0.9; margin-bottom: 30px; }
.stats { display: flex; gap: 20px; margin: 30px 0; }
.stat { 
background: rgba(255,255,255,0.15);
padding: 25px; border-radius: 15px; flex: 1;
}
.stat-number { font-size: 30px; font-weight: bold; display: block; }
.features { 
display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
gap: 20px; margin: 30px 0;
}
.feature { 
background: rgba(255,255,255,0.12);
padding: 25px; border-radius: 15px;
}
.feature-icon { font-size: 40px; margin-bottom: 15px; }
.grade-section { 
background: rgba(255,255,255,0.15);
padding: 30px; border-radius: 20px; margin: 30px 0;
}
.grade-buttons { display: flex; gap: 15px; margin-top: 20px; flex-wrap: wrap; }
.grade-btn { 
background: rgba(255,255,255,0.2); border: none; color: white;
padding: 15px 25px; border-radius: 10px; font-size: 16px;
cursor: pointer; flex: 1; min-width: 120px;
}
.grade-btn:hover { background: rgba(255,255,255,0.3); }
.status { 
background: #4CAF50; padding: 20px; border-radius: 15px;
margin: 30px 0; box-shadow: 0 5px 15px rgba(76,175,80,0.3);
}
@media (max-width: 768px) {
.robot { font-size: 60px; }
h1 { font-size: 35px; }
.stats { flex-direction: column; }
.features { grid-template-columns: 1fr; }
.grade-buttons { flex-direction: column; }
}
</style>
</head>
<body>
<div class="container">
<div class="header">
<div class="robot">ğŸ¤–</div>
<h1>ABC English Explorer</h1>
<p class="subtitle">×¤×œ×˜×¤×•×¨××” ×—×™× ×•×›×™×ª ××”×¤×›× ×™×ª ×œ×œ×™××•×“ ×× ×’×œ×™×ª</p>
<div class="status">
<h3>ğŸš€ ×”××¢×¨×›×ª ×¤×¢×™×œ×” ×•××•×›× ×” ×œ×©×™××•×©!</h3>
<p>192 ×™×—×™×“×•×ª ×œ×™××•×“ â€¢ PWA ××œ× â€¢ ×—×™× ××™ ×œ×—×œ×•×˜×™×Ÿ</p>
</div>
</div>

<div class="stats">
<div class="stat">
<span class="stat-number">192</span>
<span>×™×—×™×“×•×ª ×œ×™××•×“</span>
</div>
<div class="stat">
<span class="stat-number">25+</span>
<span>××©×—×§×™×</span>
</div>
<div class="stat">
<span class="stat-number">100%</span>
<span>×—×™× ××™</span>
</div>
<div class="stat">
<span class="stat-number">AI</span>
<span>×× ×˜×•×¨ ×—×›×</span>
</div>
</div>

<div class="features">
<div class="feature">
<div class="feature-icon">ğŸ¯</div>
<h3>×œ××™×“×” ××•×ª×××ª ××™×©×™×ª</h3>
<p>×‘×™× ×” ××œ××›×•×ª×™×ª ××ª××™××” ××ª ×”×§×•×©×™ ×œ×›×œ ×™×œ×“</p>
</div>
<div class="feature">
<div class="feature-icon">ğŸ®</div>
<h3>××©×—×§×™× ××™× ×˜×¨××§×˜×™×‘×™×™×</h3>
<p>×–×™×›×¨×•×Ÿ, ×‘×™× ×’×•, ×”×ª×××•×ª ×•×¢×•×“</p>
</div>
<div class="feature">
<div class="feature-icon">ğŸ¤</div>
<h3>×§×¨×™×™× ×•×ª ××•×‘× ×™×ª</h3>
<p>×”×§×©×‘×” ×•×“×™×‘×•×¨ ×œ×›×œ ××™×œ×” ×•××©×¤×˜</p>
</div>
<div class="feature">
<div class="feature-icon">ğŸ‘¤</div>
<h3>××•×•×˜××¨ ××ª×¤×ª×—</h3>
<p>×“××•×ª ××™×©×™×ª ×©×’×“×œ×” ×¢× ×”×™×œ×“</p>
</div>
<div class="feature">
<div class="feature-icon">ğŸ“Š</div>
<h3>××¢×§×‘ ×”×ª×§×“××•×ª</h3>
<p>×“×•×—×•×ª ××¤×•×¨×˜×™× ×œ×”×•×¨×™× ×•××•×¨×™×</p>
</div>
<div class="feature">
<div class="feature-icon">â™¿</div>
<h3>× ×’×™×©×•×ª ××œ××”</h3>
<p>××•×ª×× ×œ×›×œ ×”×™×œ×“×™× ×œ×œ× ×™×•×¦× ××Ÿ ×”×›×œ×œ</p>
</div>
</div>

<div class="grade-section">
<h2>ğŸ¯ ×‘×—×¨ ××ª ×”×›×™×ª×” ×©×œ×š</h2>
<p>×›×œ ×›×™×ª×” ××›×™×œ×” 32 ×™×—×™×“×•×ª ×œ×™××•×“ ××•×ª×××•×ª ×’×™×œ</p>
<div class="grade-buttons">
<button class="grade-btn" onclick="alert('×›×™×ª×” × - 32 ×™×—×™×“×•×ª ×‘×¡×™×¡×™×•×ª!')">×›×™×ª×” ×</button>
<button class="grade-btn" onclick="alert('×›×™×ª×” ×‘ - 32 ×™×—×™×“×•×ª ××¢× ×™×™× ×•×ª!')">×›×™×ª×” ×‘</button>
<button class="grade-btn" onclick="alert('×›×™×ª×” ×’ - 32 ×™×—×™×“×•×ª ××¨×ª×§×•×ª!')">×›×™×ª×” ×’</button>
<button class="grade-btn" onclick="alert('×›×™×ª×” ×“ - 32 ×™×—×™×“×•×ª ×××ª×’×¨×•×ª!')">×›×™×ª×” ×“</button>
<button class="grade-btn" onclick="alert('×›×™×ª×” ×” - 32 ×™×—×™×“×•×ª ××§×¦×•×¢×™×•×ª!')">×›×™×ª×” ×”</button>
<button class="grade-btn" onclick="alert('×›×™×ª×” ×• - 32 ×™×—×™×“×•×ª ××ª×§×“××•×ª!')">×›×™×ª×” ×•</button>
</div>
</div>

<div style="background: rgba(0,0,0,0.2); padding: 30px; border-radius: 15px; margin-top: 40px;">
<h3>ğŸ¤– ABC English Explorer</h3>
<p>×¤×œ×˜×¤×•×¨××” ×—×™× ×•×›×™×ª ×—×™× ××™×ª ×¢× ×‘×™× ×” ××œ××›×•×ª×™×ª ×œ×™×œ×“×™ ×™×©×¨××œ</p>
<p style="margin-top: 15px; opacity: 0.8;">× ×‘× ×” ×¢× â¤ï¸ ×œ×©×•×•×™×•×Ÿ ×—×™× ×•×›×™ ×•× ×’×™×©×•×ª ×œ×›×•×œ×</p>
</div>
</div>

<script>
if ('serviceWorker' in navigator) {
navigator.serviceWorker.register('/sw.js')
.then(() => console.log('Service Worker registered'))
.catch(err => console.log('SW failed:', err));
}
console.log('ğŸ¤– ABC English Explorer ××•×›×Ÿ ×œ×©×™××•×©!');
</script>
</body>
</html>
EOF

      - name: Create PWA Files
        run: |
          cat > manifest.json <<EOF
{
"name": "ABC English Explorer",
"short_name": "ABC Explorer",
"start_url": "/",
"display": "standalone",
"background_color": "#4FC3F7",
"theme_color": "#4FC3F7"
}
EOF
          
          cat > sw.js <<EOF
const CACHE_NAME = 'abc-v1';
const urlsToCache = ['/', '/index.html'];
self.addEventListener('install', e => {
e.waitUntil(caches.open(CACHE_NAME).then(c => c.addAll(urlsToCache)));
});
self.addEventListener('fetch', e => {
e.respondWith(caches.match(e.request).then(r => r || fetch(e.request)));
});
EOF

      - name: Create Sample Lesson
        run: |
          cat > lessons/grade1/lesson1.json <<EOF
{
"id": "grade1_lesson1",
"title": "××•×ª×™×•×ª A-C",
"vocabulary": [
{"word": "Apple", "hebrew": "×ª×¤×•×—"},
{"word": "Ball", "hebrew": "×›×“×•×¨"},
{"word": "Cat", "hebrew": "×—×ª×•×œ"}
]
}
EOF

      - name: Enable GitHub Pages
        run: |
          curl -X POST \
            -H "Authorization: token ${{ secrets.GITHUB_TOKEN }}" \
            -H "Accept: application/vnd.github+json" \
            "https://api.github.com/repos/${{ github.repository }}/pages" \
            -d '{"source":{"branch":"main"}}' || echo "Pages might already be enabled"

      - name: Commit Changes
        run: |
          git config --local user.email "action@github.com"
          git config --local user.name "GitHub Action"
          git add .
          git commit -m "ğŸš€ ABC English Explorer Launch" || exit 0
          git push

      - name: Success
        run: |
          echo "ğŸ‰ ABC English Explorer ×”×•×©×§ ×‘×”×¦×œ×—×”!"
          echo "ğŸŒ ×–××™×Ÿ ×‘×›×ª×•×‘×ª:"
          echo "https://${{ github.repository_owner }}.github.io/${{ github.event.repository.name }}"
