name: 🎯 ABC - SIMPLE & WORKING

on:
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

concurrency:
  group: simple-working
  cancel-in-progress: true

jobs:
  deploy:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deploy.outputs.page_url }}

    steps:
      - name: Clean & Create
        run: |
          rm -rf * .* 2>/dev/null || true
          
          # Simple CSS
          cat > style.css << 'EOF'
          body{font-family:Arial;background:linear-gradient(135deg,#667eea,#764ba2);margin:0;padding:20px;direction:rtl}
          .container{max-width:900px;margin:0 auto;background:rgba(255,255,255,0.95);border-radius:20px;padding:30px}
          h1{color:#667eea;text-align:center;font-size:2.5rem;margin-bottom:30px}
          .grades{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:30px 0}
          .grade{padding:25px;border-radius:15px;color:white;cursor:pointer;text-align:center;transition:transform 0.3s}
          .grade:hover{transform:translateY(-5px)}
          .units{display:grid;gap:15px;margin:20px 0}
          .unit{background:#f8f9fa;padding:20px;border-radius:10px;border:2px solid #e9ecef}
          .words{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:8px;margin:15px 0}
          .word{background:#e3f2fd;padding:8px;border-radius:6px;text-align:center;font-weight:500;cursor:pointer}
          .word:hover{background:#bbdefb}
          .btn{background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:10px 20px;border:none;border-radius:20px;cursor:pointer;margin:5px;font-weight:600}
          .btn:hover{transform:translateY(-2px)}
          .back{background:linear-gradient(135deg,#e74c3c,#c0392b)}
          EOF
          
          # Simple HTML with ALL 6 GRADES
          cat > index.html << 'EOF'
          <!DOCTYPE html><html lang="he" dir="rtl"><head><meta charset="UTF-8"><title>ABC Explorer - 6 Grades</title><link rel="stylesheet" href="style.css"></head><body><div class="container" id="app"></div><script>
          const DATA={
            "א":{name:"כיתה א'",color:"linear-gradient(135deg,#FF6B6B,#FF5252)",units:{1:["hello","hi","bye","yes","no","mom","dad","baby","cat","dog","me","you"],2:["red","blue","green","yellow","black","white","big","small","hot","cold","new","old"]}},
            "ב":{name:"כיתה ב'",color:"linear-gradient(135deg,#4ECDC4,#26C6DA)",units:{1:["apple","banana","bread","milk","water","cake","bird","fish","tree","sun","car","house"],2:["happy","sad","run","walk","eat","drink","play","sing","read","write","look","listen"]}},
            "ג":{name:"כיתה ג'",color:"linear-gradient(135deg,#45B7D1,#1E88E5)",units:{1:["school","teacher","book","desk","learn","study","friend","class","test","homework","paper","pencil"],2:["family","brother","sister","uncle","aunt","love","help","share","kind","nice","good","best"]}},
            "ד":{name:"כיתה ד'",color:"linear-gradient(135deg,#96CEB4,#4CAF50)",units:{1:["computer","phone","internet","email","call","message","photo","video","game","music","movie","show"],2:["doctor","nurse","hospital","medicine","healthy","sick","strong","exercise","sleep","rest","care","heal"]}},
            "ה":{name:"כיתה ה'",color:"linear-gradient(135deg,#FFEAA7,#FDCB6E)",units:{1:["science","research","experiment","discover","invent","create","build","design","smart","clever","think","learn"],2:["nature","environment","protect","clean","green","recycle","earth","planet","future","save","care","love"]}},
            "ו":{name:"כיתה ו'",color:"linear-gradient(135deg,#DDA0DD,#BA68C8)",units:{1:["leadership","responsibility","decision","choice","manage","organize","plan","guide","help","teach","inspire","motivate"],2:["global","international","culture","diversity","respect","understand","cooperate","unite","peace","harmony","friendship","together"]}}
          };
          let profile={xp:0,completed:[]};
          function showHome(){
            document.getElementById('app').innerHTML=`<h1>🎓 ABC English Explorer</h1><div style="text-align:center;background:#4CAF50;color:white;padding:20px;border-radius:15px;margin:20px 0;"><h2>כל 6 הכיתות מוכנות!</h2><p>6 כיתות • 12 יחידות • 144 מילים</p></div><div class="grades">${Object.keys(DATA).map(k=>`<div class="grade" style="background:${DATA[k].color}" onclick="showGrade('${k}')"><h2>${DATA[k].name}</h2><p>2 יחידות • 24 מילים</p></div>`).join('')}</div>`;
          }
          function showGrade(grade){
            const g=DATA[grade];
            document.getElementById('app').innerHTML=`<h1>${g.name}</h1><button class="btn back" onclick="showHome()">🏠 חזור</button><div class="units">${Object.keys(g.units).map(u=>`<div class="unit"><h3>יחידה ${u}</h3><div class="words">${g.units[u].map(w=>`<div class="word" onclick="speak('${w}')">${w}</div>`).join('')}</div><button class="btn" onclick="complete('${grade}${u}')">השלם יחידה</button></div>`).join('')}</div>`;
          }
          function speak(word){
            if('speechSynthesis' in window){
              const u=new SpeechSynthesisUtterance(word);
              u.lang='en-US';
              speechSynthesis.speak(u);
            }
            alert('🔊 '+word);
          }
          function complete(unit){
            if(!profile.completed.includes(unit)){
              profile.completed.push(unit);
              profile.xp+=50;
              alert('🎉 יחידה הושלמה! +50 XP');
            } else {
              alert('🔄 כבר הושלמה!');
            }
          }
          showHome();
          </script></body></html>
          EOF

      - name: Deploy
        uses: actions/configure-pages@v4

      - name: Upload
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.'

      - name: Deploy to Pages
        uses: actions/deploy-pages@v4
