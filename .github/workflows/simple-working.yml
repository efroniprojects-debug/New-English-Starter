name: 🔥 TOTAL RESET - Simple Working Site

on:
  workflow_dispatch:

permissions:
  contents: write
  pages: write
  id-token: write

concurrency:
  group: total-reset
  cancel-in-progress: true

jobs:
  total-reset:
    runs-on: ubuntu-latest
    environment:
      name: github-pages
      url: ${{ steps.deploy.outputs.page_url }}

    steps:
      - name: 🔥 TOTAL NUCLEAR RESET
        run: |
          # מחק הכל לחלוטין
          rm -rf * .* 2>/dev/null || true
          find . -name ".*" -not -name ".git" -not -name ".github" -exec rm -rf {} + 2>/dev/null || true
          
          # צור CSS פשוט
          cat > s.css << 'E'
          *{margin:0;padding:0;box-sizing:border-box}
          body{font-family:Arial;background:linear-gradient(135deg,#667eea,#764ba2);padding:20px;direction:rtl;color:#333}
          .c{max-width:900px;margin:0 auto;background:rgba(255,255,255,0.95);border-radius:20px;padding:30px}
          h1{color:#667eea;text-align:center;font-size:2.5rem;margin-bottom:30px}
          .g{display:grid;grid-template-columns:repeat(auto-fit,minmax(250px,1fr));gap:20px;margin:30px 0}
          .d{padding:25px;border-radius:15px;color:white;cursor:pointer;text-align:center;transition:transform 0.3s}
          .d:hover{transform:translateY(-5px)}
          .u{display:grid;gap:15px;margin:20px 0}
          .t{background:#f8f9fa;padding:20px;border-radius:10px;border:2px solid #e9ecef}
          .w{display:grid;grid-template-columns:repeat(auto-fill,minmax(80px,1fr));gap:8px;margin:15px 0}
          .o{background:#e3f2fd;padding:8px;border-radius:6px;text-align:center;font-weight:500;cursor:pointer}
          .o:hover{background:#bbdefb}
          .b{background:linear-gradient(135deg,#667eea,#764ba2);color:white;padding:10px 20px;border:none;border-radius:20px;cursor:pointer;margin:5px;font-weight:600}
          .b:hover{transform:translateY(-2px)}
          .k{background:linear-gradient(135deg,#e74c3c,#c0392b)}
          E
          
          # צור HTML עם כל 6 הכיתות
          cat > index.html << 'E'
          <!DOCTYPE html><html lang="he" dir="rtl"><head><meta charset="UTF-8"><title>ABC - 6 כיתות</title><link rel="stylesheet" href="s.css"></head><body><div class="c" id="a"></div><script>
          const D={
            1:{n:"כיתה א'",c:"linear-gradient(135deg,#FF6B6B,#FF5252)",u:{1:["hello","hi","bye","yes","no","mom","dad","baby","cat","dog","me","you"],2:["red","blue","green","yellow","black","white","big","small","hot","cold","new","old"]}},
            2:{n:"כיתה ב'",c:"linear-gradient(135deg,#4ECDC4,#26C6DA)",u:{1:["apple","banana","bread","milk","water","cake","bird","fish","tree","sun","car","house"],2:["happy","sad","run","walk","eat","drink","play","sing","read","write","look","listen"]}},
            3:{n:"כיתה ג'",c:"linear-gradient(135deg,#45B7D1,#1E88E5)",u:{1:["school","teacher","book","desk","learn","study","friend","class","test","homework","paper","pencil"],2:["family","brother","sister","uncle","aunt","love","help","share","kind","nice","good","best"]}},
            4:{n:"כיתה ד'",c:"linear-gradient(135deg,#96CEB4,#4CAF50)",u:{1:["computer","phone","internet","email","call","message","photo","video","game","music","movie","show"],2:["doctor","nurse","hospital","medicine","healthy","sick","strong","exercise","sleep","rest","care","heal"]}},
            5:{n:"כיתה ה'",c:"linear-gradient(135deg,#FFEAA7,#FDCB6E)",u:{1:["science","research","experiment","discover","invent","create","build","design","smart","clever","think","learn"],2:["nature","environment","protect","clean","green","recycle","earth","planet","future","save","care","love"]}},
            6:{n:"כיתה ו'",c:"linear-gradient(135deg,#DDA0DD,#BA68C8)",u:{1:["leadership","responsibility","decision","choice","manage","organize","plan","guide","help","teach","inspire","motivate"],2:["global","international","culture","diversity","respect","understand","cooperate","unite","peace","harmony","friendship","together"]}}
          };
          let p={x:0,c:[]};
          function h(){document.getElementById('a').innerHTML='<h1>🎓 ABC English Explorer</h1><div style="text-align:center;background:#4CAF50;color:white;padding:20px;border-radius:15px;margin:20px 0;"><h2>כל 6 הכיתות מוכנות!</h2><p>6 כיתות • 12 יחידות • 144 מילים</p></div><div class="g">'+Object.keys(D).map(k=>'<div class="d" style="background:'+D[k].c+'" onclick="s('+k+')"><h2>'+D[k].n+'</h2><p>2 יחידות • 24 מילים</p></div>').join('')+'</div>';}
          function s(g){const v=D[g];document.getElementById('a').innerHTML='<h1>'+v.n+'</h1><button class="b k" onclick="h()">🏠 חזור</button><div class="u">'+Object.keys(v.u).map(u=>'<div class="t"><h3>יחידה '+u+'</h3><div class="w">'+v.u[u].map(w=>'<div class="o" onclick="z(\''+w+'\')">'+w+'</div>').join('')+'</div><button class="b" onclick="f(\''+g+u+'\')">השלם יחידה</button></div>').join('')+'</div>';}
          function z(w){if('speechSynthesis'in window){const x=new SpeechSynthesisUtterance(w);x.lang='en-US';speechSynthesis.speak(x);}alert('🔊 '+w);}
          function f(u){if(!p.c.includes(u)){p.c.push(u);p.x+=50;alert('🎉 יחידה הושלמה! +50 XP');}else{alert('🔄 כבר הושלמה!');}}
          h();
          </script></body></html>
          E

      - name: 🚀 Deploy
        uses: actions/configure-pages@v4
        
      - name: 📤 Upload
        uses: actions/upload-pages-artifact@v3
        with:
          path: '.'
          
      - name: 🎯 Deploy to Pages
        uses: actions/deploy-pages@v4
